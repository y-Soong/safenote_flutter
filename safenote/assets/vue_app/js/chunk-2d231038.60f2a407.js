(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d231038"],{ef78:function(e,t,c){"use strict";c.r(t);var l=c("7a23"),a=c("6605"),s=c("0d5e");const n={class:"min-h-screen flex flex-col bg-white"},o={class:"border border-gray-300 bg-gray-50 rounded-lg p-3 shadow-sm hover:shadow-md transition",style:{background:"#d5eee5"}},i={class:"flex justify-between items-center"},r={class:"text-gray-800 font-semibold text-base sm:text-lg"},d={class:"flex justify-end gap-4"},b={class:"flex items-center gap-1 text-sm text-gray-700"},u=["name","onUpdate:modelValue"],j={class:"flex items-center gap-1 text-sm text-gray-700"},p=["name","onUpdate:modelValue"],E={key:0,class:"shadow-sm mt-0"},O={class:"flex justify-end gap-2 px-3 pt-1 pb-1"},C=["onClick"],_=["id","onChange"],g=["id","onChange"],h={key:0,class:"px-3 pb-2"},v={class:"mt-2 grid grid-cols-3 sm:grid-cols-4 gap-2"},I=["src"],T=["onClick"],m=["onUpdate:modelValue"];var f={__name:"ChkLst",setup(e){const t=Object(a["c"])(),c=Object(a["d"])(),f=Object(l["H"])([]),x=Object(l["H"])(null),y=Object(l["H"])(""),k=Object(l["H"])("");Object(l["B"])(async()=>{const e=t.query.qr;let c=null;try{const t=Array.isArray(e)?e[0]:e;"string"===typeof t&&(c=JSON.parse(decodeURIComponent(t)))}catch(l){console.warn("QR parse failed:",l)}x.value=c||{},y.value=x.value.siteCd||"",k.value=x.value.chkptCd||"",await N()});const N=async()=>{try{const e=await s["a"].post("/appApi/chkLst01/getChkLstInfo",{siteCd:y.value,chkptCd:k.value});200===e.status&&(f.value=(e.data||[]).map(e=>{var t;return{INSPECT_ITEM_CD:e.INSPECT_ITEM_CD,INSPECT_ITEM_SUBJ:e.INSPECT_ITEM_SUBJ,INSPECT_VALUE:null!==(t=e.INSPECT_VALUE)&&void 0!==t?t:void 0}}))}catch(c){var e,t;console.error(c),alert((null===c||void 0===c||null===(e=c.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"목록 조회 실패")}};function S(){c.back()}const w=Object(l["G"])({}),P=Object(l["G"])({});function U(e){const t=document.getElementById("gallery_"+e.INSPECT_ITEM_CD);t&&t.click()}function M(e,t){const c=t.target,l=c&&c.files&&c.files[0];if(!l)return;const a=e.INSPECT_ITEM_CD,s=URL.createObjectURL(l);w[a]||(w[a]=[]),w[a].push({url:s,file:l}),c.value=""}function L(e,t){const c=e.INSPECT_ITEM_CD,l=w[c]||[],a=l[t];a&&(URL.revokeObjectURL(a.url),l.splice(t,1))}return Object(l["z"])(()=>{Object.values(w).forEach(e=>{(e||[]).forEach(e=>URL.revokeObjectURL(e.url))})}),(e,t)=>(Object(l["E"])(),Object(l["h"])("div",n,[Object(l["i"])("div",{class:"flex items-center p-4 mt-10"},[Object(l["i"])("button",{onClick:S,class:"mr-2 text-gray-600 hover:text-gray-900"},t[0]||(t[0]=[Object(l["i"])("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Object(l["i"])("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))]),(Object(l["E"])(!0),Object(l["h"])(l["a"],null,Object(l["J"])(f.value,e=>(Object(l["E"])(),Object(l["h"])("div",{class:"px-5 pb-2",key:e.INSPECT_ITEM_CD},[Object(l["i"])("div",o,[Object(l["i"])("div",i,[Object(l["i"])("span",r,Object(l["N"])(e.INSPECT_ITEM_SUBJ),1),Object(l["i"])("div",d,[Object(l["i"])("label",b,[Object(l["Z"])(Object(l["i"])("input",{type:"radio",name:"chk_"+e.INSPECT_ITEM_CD,"onUpdate:modelValue":t=>e.INSPECT_VALUE=t,value:"Y",class:"text-blue-500 focus:ring-blue-500"},null,8,u),[[l["T"],e.INSPECT_VALUE]]),t[1]||(t[1]=Object(l["k"])(" 양호 "))]),Object(l["i"])("label",j,[Object(l["Z"])(Object(l["i"])("input",{type:"radio",name:"chk_"+e.INSPECT_ITEM_CD,"onUpdate:modelValue":t=>e.INSPECT_VALUE=t,value:"N",class:"text-red-500 focus:ring-red-500"},null,8,p),[[l["T"],e.INSPECT_VALUE]]),t[2]||(t[2]=Object(l["k"])(" 불량 "))])])])]),"N"===e.INSPECT_VALUE?(Object(l["E"])(),Object(l["h"])("div",E,[Object(l["i"])("div",O,[Object(l["i"])("button",{class:"rounded text-white text-sm px-3 py-1",style:{"background-color":"#30796a"},onClick:t=>U(e)}," 사진첨부 ",8,C)]),Object(l["i"])("input",{type:"file",id:"gallery_"+e.INSPECT_ITEM_CD,accept:"image/*",capture:"environment",class:"hidden",onChange:t=>M(e,t)},null,40,_),Object(l["i"])("input",{type:"file",id:"camera_"+e.INSPECT_ITEM_CD,accept:"image/*",capture:"environment",class:"hidden",onChange:t=>M(e,t)},null,40,g),(w[e.INSPECT_ITEM_CD]||[]).length?(Object(l["E"])(),Object(l["h"])("div",h,[Object(l["i"])("div",v,[(Object(l["E"])(!0),Object(l["h"])(l["a"],null,Object(l["J"])(w[e.INSPECT_ITEM_CD],(t,c)=>(Object(l["E"])(),Object(l["h"])("div",{key:`${e.INSPECT_ITEM_CD}_${c}`,class:"relative border rounded overflow-hidden"},[Object(l["i"])("img",{src:t.url,alt:"",class:"w-full h-24 object-cover"},null,8,I),Object(l["i"])("button",{class:"absolute top-1 right-1 bg-black/60 text-white text-xs rounded px-1",onClick:t=>L(e,c)}," 삭제 ",8,T)]))),128))])])):Object(l["g"])("",!0),Object(l["Z"])(Object(l["i"])("textarea",{class:"w-full p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 border border-gray-300 bg-white rounded-lg",rows:"2",placeholder:"상세내용을 입력해주세요.","onUpdate:modelValue":t=>P[e.INSPECT_ITEM_CD]=t},null,8,m),[[l["V"],P[e.INSPECT_ITEM_CD]]])])):Object(l["g"])("",!0)]))),128))]))}};const x=f;t["default"]=x}}]);
//# sourceMappingURL=chunk-2d231038.60f2a407.js.map